<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PixTools | Nayeem Fardin</title>
    <meta name="description"
        content="PixTools: Distributed Image Processing Platform architecture and engineering highlights." />

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="PixTools | Nayeem Fardin" />
    <meta property="og:description" content="Distributed async image processing platform engineered for scale." />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://nayeemfardin.com/pixtools.html" />
    <meta property="og:image" content="https://nayeemfardin.com/og-image.jpg" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap"
        rel="stylesheet" />

    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="/project-styles.css" />

    <!-- Vercel Web Analytics -->
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>

<body>

    <!-- ===== NAV ===== -->
    <nav class="nav" id="nav">
        <a href="/index.html" class="nav__logo">NF<span class="accent">.</span></a>
        <div class="nav__links">
            <a href="/index.html#about">About</a>
            <a href="/index.html#projects">Projects</a>
            <a href="/index.html#experience">Experience</a>
            <a href="/index.html#contact">Contact</a>
        </div>
        <div class="nav__actions">
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <span class="theme-toggle__icon theme-toggle__icon--sun">‚òÄÔ∏è</span>
                <span class="theme-toggle__icon theme-toggle__icon--moon">üåô</span>
            </button>
            <button class="nav__hamburger" id="hamburger" aria-label="Toggle menu">
                <span></span><span></span><span></span>
            </button>
        </div>
    </nav>

    <!-- ===== MOBILE MENU ===== -->
    <div class="mobile-menu" id="mobileMenu">
        <a href="/index.html#about">About</a>
        <a href="/index.html#projects">Projects</a>
        <a href="/index.html#experience">Experience</a>
        <a href="/index.html#contact">Contact</a>
    </div>

    <main class="project-showcase">
        <div class="container">

            <a href="/index.html#projects" class="brutalist-back-btn">
                <span>&#8592;</span> Back to Projects
            </a>

            <header class="project-showcase__header">
                <h1 class="project-showcase__title">PixTools</h1>
                <p class="project-showcase__subtitle">Distributed Image Processing Platform. Engineered to handle
                    compute-heavy ML inference and standard image operations at scale, prioritizing high availability
                    and zero-trust deployments.</p>

                <div class="project-showcase__links">
                    <a href="https://github.com/NFRohan/PixTools" target="_blank" rel="noopener"
                        class="brutalist-btn brutalist-btn--primary">View on GitHub ‚Üó</a>
                    <!-- Live demo disabled: <a href="http://k8s-pixtools..." class="brutalist-btn brutalist-btn--secondary">Live Demo ‚Üó</a> -->
                </div>
            </header>

            <div class="project-showcase__image-placeholder">
                <img src="./Images/PixTools images/pixtools ui.png" alt="PixTools User Interface"
                    onerror="this.style.display='none'" />
            </div>

            <div class="project-showcase__content">
                <article class="project-showcase__body">
                    <h2>Overview</h2>
                    <p>PixTools is a production-grade, distributed asynchronous image-processing system. Users upload
                        images, choose operations (format conversion, DnCNN denoising, EXIF extraction), and receive
                        outputs asynchronously when background processing completes.</p>

                    <p>At its core, PixTools implements a robust event-driven pipeline utilizing <strong>RabbitMQ +
                            Celery</strong>, idempotent request handling via Redis, webhook callbacks with pybreaker
                        circuit-breakers, and 24-hour retention for processed files.</p>

                    <h2>The Scale-Up Struggle & Engineering Highlights</h2>
                    <p>This system wasn't just deployed; it was architected to survive network drops, EC2 terminations,
                        and infrastructure drift. Here are the real-world engineering challenges solved:</p>

                    <div class="eng-highlight">
                        <div class="eng-highlight__title">The "Ghost Node" Blackout</div>
                        <p><strong>The Problem:</strong> The original unified K3s Auto Scaling Group used Spot
                            Instances. When AWS inevitably reclaimed a spot instance under heavy ML load, it took down
                            the control plane, RabbitMQ, and the API simultaneously. Deployments hung trying to resolve
                            "Ghost Nodes".</p>
                        <p><span class="eng-highlight__fix">The Fix:</span> A massive dual-node re-architecture. The
                            control plane, RabbitMQ, and Redis were moved to a stable, on-demand infra node. The API and
                            Celery workers were pushed to a scalable array of Spot flex nodes, saving 70% in cost while
                            ensuring the control plane always survived spot terminations.</p>
                        <div class="project-showcase__gallery">
                            <img class="project-showcase__gallery-item" src="./Images/PixTools images/kubectl nodes.png"
                                alt="Kubernetes Nodes Overview" loading="lazy">
                            <img class="project-showcase__gallery-item" src="./Images/PixTools images/aws instances.png"
                                alt="AWS EC2 Spot Instances" loading="lazy">
                        </div>
                    </div>

                    <div class="eng-highlight">
                        <div class="eng-highlight__title">Dynamic Infrastructure as Code</div>
                        <p><strong>The Problem:</strong> Early CI/CD relied on hardcoded GitHub Secrets (e.g., ALB
                            Security Group ID). When Terraform recreated these during architecture shifts, the pipeline
                            natively broke trying to attach to ghost security groups.</p>
                        <p><span class="eng-highlight__fix">The Fix:</span> Fully dynamic state resolution. Terraform
                            provisions and writes state directly into AWS Systems Manager (SSM) Parameter Store. GitHub
                            Actions queries SSM at runtime, eliminating credential drift.</p>
                        <img class="eng-highlight__image" src="./Images/PixTools images/CD Green.png"
                            alt="Continuous Deployment Pipeline Success" loading="lazy">
                    </div>

                    <div class="eng-highlight">
                        <div class="eng-highlight__title">The Celery Metrics Flatline</div>
                        <p><strong>The Problem:</strong> Grafana dashboards showed processing times stuck at 0. The
                            API's <code>/metrics</code> endpoint was scraped perfectly by Alloy, but the API only queued
                            jobs; the actual Python workers had no embedded HTTP server to expose their metrics.</p>
                        <p><span class="eng-highlight__fix">The Fix:</span> Deployed a dedicated
                            <code>celery-exporter</code> container bridging worker queues and task completions directly
                            from RabbitMQ into Prometheus metrics, combined with enabling worker sent events.
                        </p>
                        <img class="eng-highlight__image" src="./Images/PixTools images/grafana api.png"
                            alt="Grafana API Metrics Dashboard" loading="lazy">
                    </div>

                    <div class="eng-highlight">
                        <div class="eng-highlight__title">The 2-Minute Warning (Spot Resilience)</div>
                        <p><strong>The Problem:</strong> A hand-rolled bash script trying to <code>kubectl drain</code>
                            terminating spot instances frequently failed silently due to degraded networking during the
                            2-minute AWS warning window.</p>
                        <p><span class="eng-highlight__fix">The Fix:</span> Replaced it with the official AWS Node
                            Termination Handler DaemonSet. Now, on a spot interruption notice, it cleanly cordons,
                            taints, and evicts pods directly via the internal host network, guaranteeing zero dropped
                            background jobs.</p>
                        <img class="eng-highlight__image" src="./Images/PixTools images/sys and db.png"
                            alt="System and DB Resource Utilization" loading="lazy">
                    </div>

                    <h2>Architecture</h2>
                    <pre class="mermaid">
flowchart TD
  subgraph AWS["AWS Cloud"]
    ALB[ALB Ingress]
    RDS[(PostgreSQL 16\nRDS)]
    S3[(S3 Buckets)]
    
    subgraph K3s["K3s Cluster"]
      subgraph InfraNode["Infra Node (On-Demand t3.small)"]
        ControlPlane[K3s Control Plane]
        RMQ(RabbitMQ)
        REDIS(Redis)
        BEAT(Celery Beat)
        ALBCtrl(ALB Controller)
        CEXP(Celery Exporter)
      end
      
      subgraph WorkloadNode["Workload Nodes (Spot m7i-flex.large, max 3)"]
        API(FastAPI App)
        W_STD(Celery Worker Standard)
        W_ML(Celery Worker ML)
        NTH(AWS Node Termination Handler)
      end

      ALLOY(Alloy DaemonSet)
    end
  end

  GrafanaCloud["‚òÅÔ∏è Grafana Cloud (Logs, Metrics, Traces)"]

  User[Frontend User] --> ALB
  ALB --> API
  API -.->|Idempotency/Locking| REDIS
  API -.->|Job Tracking| RDS
  API -->|Publishes Tasks| RMQ
  API -->|Uploads Image| S3
  
  RMQ -->|Consumes| W_STD
  RMQ -->|Consumes| W_ML
  
  W_STD -->|Processes| S3
  W_ML -->|Infers| S3
  
  W_STD -.->|Updates Status| RDS
  W_ML -.->|Updates Status| RDS
  
  BEAT -->|Schedules| RMQ
  CEXP -.->|Reads Events| RMQ
  ALLOY -->|Scrapes| API
  ALLOY -->|Scrapes| CEXP
  ALLOY ==>|Ships Telemetry| GrafanaCloud
  NTH -.->|Cordons & Drains| ControlPlane
                    </pre>

                    <h2>Runtime Topology</h2>
                    <ul>
                        <li><strong>Ingress & API:</strong> AWS ALB Controller routing to K3s Pods running FastAPI.</li>
                        <li><strong>Message Broker:</strong> RabbitMQ StatefulSet with Dead Letter Exchanges for
                            failures.</li>
                        <li><strong>State & Locking:</strong> Redis for transient locks and PostgreSQL 16 on AWS RDS for
                            persistent tracking.</li>
                        <li><strong>Data Plane:</strong> K3s Agents on scalable <code>m7i-flex.large</code> spot
                            instances.</li>
                        <li><strong>Observability:</strong> Alloy ‚Üí Grafana Cloud LGTM. Metrics, Loki logs, and Tempo
                            openTelemetry traces via a single DaemonSet.</li>
                    </ul>

                    <div class="project-showcase__gallery">
                        <img class="project-showcase__gallery-item" src="./Images/PixTools images/Grafana Loki Logs.png"
                            alt="Grafana Loki Logs Integration" loading="lazy">
                        <img class="project-showcase__gallery-item" src="./Images/PixTools images/full trace.png"
                            alt="Tempo OpenTelemetry Full Trace" loading="lazy">
                        <img class="project-showcase__gallery-item" src="./Images/PixTools images/grafana tracing.png"
                            alt="Grafana Tracing Dashboard" loading="lazy">
                    </div>

                </article>

                <aside class="project-sidebar">

                    <div class="project-sidebar__section">
                        <div class="project-sidebar__heading">Technologies</div>
                        <div class="skill-group__badges">
                            <span class="tech-tag">FastAPI</span>
                            <span class="tech-tag">Celery</span>
                            <span class="tech-tag">RabbitMQ</span>
                            <span class="tech-tag">Terraform</span>
                            <span class="tech-tag">AWS EKS / K3s</span>
                            <span class="tech-tag">Redis</span>
                            <span class="tech-tag">PostgreSQL</span>
                            <span class="tech-tag">Grafana LGTM</span>
                        </div>
                    </div>

                    <div class="project-sidebar__section">
                        <div class="project-sidebar__heading">Key Patterns</div>
                        <ul>
                            <li>Asynchronous Event-Driven Architecture</li>
                            <li>Dual-Node Kubernetes Cluster</li>
                            <li>Spot Instance Lifecycle Management</li>
                            <li>Zero-Trust OIDC Deployments</li>
                            <li>Dynamic SSM State Resolution</li>
                        </ul>
                    </div>

                </aside>
            </div>

        </div>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="footer">
        <div class="container footer__inner">
            <p>Built with stubbornness & caffeine.</p>
            <p>&copy; 2026 Nayeem Fardin</p>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTopBtn" class="back-to-top" aria-label="Back to Top">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="3" stroke-linecap="square" stroke-linejoin="miter">
            <line x1="12" y1="19" x2="12" y2="5"></line>
            <polyline points="5 12 12 5 19 12"></polyline>
        </svg>
    </button>

    <script type="module" src="/main.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#ffffff',
                primaryTextColor: '#1a1a1a',
                primaryBorderColor: '#1a1a1a',
                lineColor: '#1a1a1a',
                secondaryColor: '#ffe156',
                tertiaryColor: '#fafafa',
                fontFamily: '"Space Grotesk", sans-serif'
            }
        });

        // Add interactive click-to-expand backdrop
        const backdrop = document.createElement('div');
        backdrop.style.cssText = 'position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);z-index:9998;display:none;cursor:zoom-out;';
        document.body.appendChild(backdrop);

        document.addEventListener('click', (e) => {
            const mermaidEl = e.target.closest('.mermaid');
            if (e.target === backdrop) {
                const expanded = document.querySelector('.mermaid.expanded');
                if (expanded) expanded.classList.remove('expanded');
                backdrop.style.display = 'none';
                document.body.style.overflow = '';
            } else if (mermaidEl) {
                mermaidEl.classList.toggle('expanded');
                if (mermaidEl.classList.contains('expanded')) {
                    backdrop.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                } else {
                    backdrop.style.display = 'none';
                    document.body.style.overflow = '';
                }
            }
        });
    </script>
</body>

</html>